# TCP 원격 장치 제어 시스템

이 프로젝트는 TCP 기반의 소켓 통신을 통해 우분투 클라이언트에서 라즈베리파이 서버로 명령을 전송하고, 실제 하드웨어(LED, 부저, 조도센서, 7세그먼트)를 제어하는 시스템입니다.

## 📁 파일 구성

- `client.c`: 클라이언트 프로그램 (우분투 실행)
- `server.c`: 서버 프로그램 (라즈베리파이 실행)
- `hardware.c/hardware.h`: 장치 제어 구현
- `daemon.c/daemon.h`: 서버 데몬화
- `common.h`: 공통 상수 및 구조체 정의
- `Makefile`: 전체 빌드 파일

## ⚙️ 빌드 방법                    
make	                          |  서버와 클라이언트 모두 빌드
make server	                    |  서버만 빌드
make client	                    |  클라이언트만 빌드

## ⚙️ 실행 명령어 (서버 실행 : @RaspberryPi4 , 클라이언트 실행 : @Ubuntu)
make run-server	                |  서버 일반 모드 실행
make run-daemon	                |  서버 데몬 모드 실행
make run-single	                |  서버 단일 클라이언트 모드 실행
make run-client IP=127.0.0.1	  |  클라이언트 실행

## ⚙️ 유틸리티 명령   
make clean	                    |  빌드 파일 정리
make install-lib	              |  라이브러리 시스템 설치


## 🧪 제어 명령 예시
1    # LED 제어 모드로 전환
2    # 부저 제어 모드로 전환
3    # 자동 조명 제어 모드로 전환
4    # LED 밝기 제어 모드로 전환
5    # 조도센서 값 읽기
6    # 7세그먼트 제어 모드로 전환
7    # 카운트다운 제어 모드로 전환
8    # 카운트 제어 모드로 전환
9    # 서버 상태 확인
10   # 서버 종료 (관리자 전용)
0    # 클라이언트 종료

## 🧪모드별 제어 명령어
1. LED 제어 모드
```
  1    # LED 켜기
  0    # LED 끄기
  00   # 메인 메뉴로 돌아가기
```
2. 부저 제어 모드
```
  1    # 부저 켜기 (멜로디 재생)
  0    # 부저 끄기
  00   # 메인 메뉴로 돌아가기
```
3. 자동 조명 제어 모드
```
  1    # 자동 조명 제어 활성화 (어두울 때 자동으로 LED 켜짐)
  0    # 자동 조명 제어 비활성화
  00   # 메인 메뉴로 돌아가기
```
4. LED 밝기 제어 모드
```
  1    # LED 밝기 최저 (25%)
  2    # LED 밝기 중간 (50%)
  3    # LED 밝기 최대 (100%)
  00   # 메인 메뉴로 돌아가기
```
5. 조도센서 읽기 (직접 명령)
  메뉴에서 5를 선택하면 즉시 조도센서 값을 읽어 반환
  - 응답 `LIGHT 1`: 밝음 감지
  - 응답 `LIGHT 0`: 어두움 감지
6. 7세그먼트 제어 모드
```
  0    # 7세그먼트에 0 표시
  1    # 7세그먼트에 1 표시
  2    # 7세그먼트에 2 표시
  ...
  9    # 7세그먼트에 9 표시
  00   # 메인 메뉴로 돌아가기
```
7. 카운트다운 제어 모드
```
  1    # 1부터 카운트다운 시작
  2    # 2부터 카운트다운 시작
  ...
  9    # 9부터 카운트다운 시작
  00   # 메인 메뉴로 돌아가기
```
8. 카운트 제어 모드
```
  0,9    # 0부터 9까지 순차적으로 카운트
  9,0    # 9부터 0까지 역순으로 카운트
  3,7    # 3부터 7까지 카운트
  00     # 메인 메뉴로 돌아가기
```
9. 서버 상태 확인 (직접 명령)
  메뉴에서 9를 선택하면 서버 상태 확인
- 응답 `CONNECTED_CLIENTS n`: 현재 연결된 클라이언트 수 표시
10. 서버 종료 (직접 명령)
  메뉴에서 10을 선택하면 서버 종료 확인 메시지 표시됨
```
  정말로 서버를 종료하시겠습니까? (y/N): y
```
  - `y` 또는 `Y` 입력 시 서버 종료 명령 전송
  - 다른 키 입력 시 취소
0. 클라이언트 종료 (직접 명령)
  메뉴에서 0을 선택하면 클라이언트 종료

## ⚠️ 주의 사항

- 라즈베리파이에는 `wiringPi`, `softTone` 라이브러리 사전 설치 필요
- 부저는 멜로디가 스레드 기반으로 재생됨
- LED 밝기 제어는 PWM 방식 사용
